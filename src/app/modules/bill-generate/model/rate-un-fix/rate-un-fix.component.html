<h2 mat-dialog-title class="m-0 p-0 px-2 model-title justify-content-between d-flex align-items-center">
    <span>{{data.title}}</span>
    <i matTooltip="Close" mat-dialog-close class="fa-solid fa-circle-xmark cursor-pointer"></i>
</h2>

<mat-dialog-content>
    <div class="container my-3">
        <form [formGroup]="RateUnFixBillForm">
            <div class="row">
                <div class="col-lg-12">
                    <div class="table-container">
                        <div>
                            <table matSort mat-table [dataSource]="dataSource"
                                (keydown)="handleKeyboardNavigation($event)">
                                <!-- Displayed columns -->
                                <ng-container *ngFor="let column of columns" [matColumnDef]="column.columnDef">
                                    <th mat-header-cell mat-sort-header *matHeaderCellDef>{{ column.header }}</th>
                                    <td [ngClass]="{'reject-row': row.Status=='Rejected'}" mat-cell
                                        *matCellDef="let row; let i = index;">
                                        {{ row[column.columnDef] }}
                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>


                                <!-- Collection Date -->
                                <ng-container matColumnDef="CollectionDate">
                                    <th mat-header-cell *matHeaderCellDef> Collection Date </th>
                                    <td class="weight-column" mat-cell *matCellDef="let row">{{row.CollectionDate}}</td>
                                    <td class="footer-total" mat-footer-cell *matFooterCellDef>
                                        <b>Total Days : {{dataSource.data.length}} </b>
                                    </td>
                                </ng-container>



                                <!-- Fine Leaf -->
                                <ng-container matColumnDef="FineLeaf">
                                    <th mat-header-cell *matHeaderCellDef> FineLeaf </th>
                                    <td class="weight-column" mat-cell *matCellDef="let row">{{row.FineLeaf}}</td>
                                    <td class="footer-total" mat-footer-cell *matFooterCellDef>
                                        <!-- <b>{{ getTotal('FinalWeight') }} KG</b> -->
                                    </td>
                                </ng-container>

                                <!-- Challan Weight -->
                                <ng-container matColumnDef="ChallanWeight">
                                    <th mat-header-cell *matHeaderCellDef> ChallanWeight </th>
                                    <td class="weight-column" mat-cell *matCellDef="let row">{{row.ChallanWeight}} KG
                                    </td>
                                    <td class="footer-total" mat-footer-cell *matFooterCellDef>
                                        <b>{{ getTotal('ChallanWeight') }} KG</b>
                                    </td>
                                </ng-container>


                                <!-- AverageRate -->
                                <ng-container matColumnDef="Rate">
                                    <th mat-header-cell *matHeaderCellDef>Rate <i
                                            class="fa-solid fa-indian-rupee-sign"></i>
                                    </th>
                                    <td class="weight-column" mat-cell *matCellDef="let row"> <i
                                            class="fa-solid fa-indian-rupee-sign"></i>
                                        {{row.Rate | currency:'INR':'symbol':undefined:'en-IN'}} </td>
                                    <td class="footer-total" mat-footer-cell *matFooterCellDef>

                                    </td>
                                </ng-container>




                                <ng-container matColumnDef="GrossAmount">
                                    <th mat-header-cell *matHeaderCellDef>Amount <i
                                            class="fa-solid fa-indian-rupee-sign"></i>
                                    </th>
                                    <td class="weight-column" mat-cell *matCellDef="let row"> <i
                                            class="fa-solid fa-indian-rupee-sign"></i>
                                        {{row.GrossAmount | currency:'INR':'symbol':undefined:'en-IN'}} </td>
                                    <td class="footer-total" mat-footer-cell *matFooterCellDef>
                                        <b><i class="fa-solid fa-indian-rupee-sign"></i> {{ getTotal('GrossAmount') |
                                            currency:'INR':'symbol':undefined:'en-IN' }}</b>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true;"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index;"
                                    [class.selected-row]="i == selectedRowIndex" (click)="selectRow(row, i)">
                                </tr>
                                <tr class="table-footer" mat-footer-row
                                    *matFooterRowDef="displayedColumns; sticky: true">
                                </tr>
                                <tr class="mat-row" *matNoDataRow>
                                    <td class="mat-cell text-center text-danger"
                                        attr.colspan="{{displayedColumns.length + 1}}">Record is
                                        not
                                        found !</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <!-- <mat-paginator [pageSizeOptions]="[75, 100, 125]" showFirstLastButtons></mat-paginator> -->
                </div>
            </div>
        </form>
    </div>
</mat-dialog-content>
<mat-dialog-actions align="center">
    <button (click)="redirectToRateFixPage(data.fromDate,data.toDate,data.clientId,data.clientName)" class="btn-color" mat-raised-button cdkFocusInitial>Goto Rate fix Page</button>
</mat-dialog-actions>